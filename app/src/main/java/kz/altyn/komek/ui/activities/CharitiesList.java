package kz.altyn.komek.ui.activities;import android.os.Bundle;import android.view.MenuItem;import android.widget.Toast;import androidx.annotation.NonNull;import androidx.appcompat.app.AppCompatActivity;import androidx.appcompat.widget.Toolbar;import androidx.recyclerview.widget.LinearLayoutManager;import androidx.recyclerview.widget.RecyclerView;import androidx.swiperefreshlayout.widget.SwipeRefreshLayout;import kz.altyn.komek.R;import kz.altyn.komek.adapters.CharityAdapter;import kz.altyn.komek.adapters.CharityViewHolder;import kz.altyn.komek.models.Charity;import kz.altyn.komek.models.Package;import kz.altyn.komek.retrofit.RetrofitClient;import retrofit2.Call;import retrofit2.Callback;import retrofit2.Response;import com.firebase.ui.database.paging.FirebaseRecyclerPagingAdapter;import java.util.ArrayList;import java.util.Collections;import java.util.List;import java.util.Objects;public class CharitiesList extends AppCompatActivity {    private SwipeRefreshLayout swipeRefreshLayout;    private RecyclerView recyclerView;    private LinearLayoutManager layoutManager;    private List<Charity> charities = new ArrayList<>();    private CharityAdapter charityAdapter;    private Toolbar toolbar;    private Package aPackage;    @Override    protected void onCreate(Bundle savedInstanceState) {        super.onCreate(savedInstanceState);        setContentView(R.layout.activity_charities_list);        initUi();        fetchCharities();        onRefresh();    }    private void initUi() {        toolbar = findViewById(R.id.toolbar);        setSupportActionBar(toolbar);        Objects.requireNonNull(getSupportActionBar()).setDisplayHomeAsUpEnabled(true);        getSupportActionBar().setDisplayShowHomeEnabled(true);        recyclerView = findViewById(R.id.recyclerView);        swipeRefreshLayout = findViewById(R.id.charities);        layoutManager = new LinearLayoutManager(this);        recyclerView.setLayoutManager(layoutManager);        aPackage = (Package) getIntent().getSerializableExtra("donS");        charityAdapter = new CharityAdapter(charities, aPackage);        recyclerView.setAdapter(charityAdapter);    }    @Override    public boolean onOptionsItemSelected(MenuItem item) {        switch (item.getItemId()) {            case android.R.id.home:                onBackPressed();                return true;        }        return super.onOptionsItemSelected(item);    }    private void onRefresh() {        swipeRefreshLayout.setOnRefreshListener(this::fetchCharities);    }    private void fetchCharities() {        charities.clear();        swipeRefreshLayout.setRefreshing(true);        RetrofitClient.getRetrofitClient()                .getAllCharities().enqueue(new Callback<List<Charity>>() {                    @Override                    public void onResponse(@NonNull Call<List<Charity>> call, @NonNull Response<List<Charity>> response) {                        System.out.println("Do request");                        if (response.isSuccessful() && response.body() != null) {                            swipeRefreshLayout.setRefreshing(false);                            charities.addAll(response.body());                            charityAdapter.notifyDataSetChanged();                        }                        System.out.println(response.body());                    }                    @Override                    public void onFailure(@NonNull Call<List<Charity>> call, @NonNull Throwable t) {                        Toast.makeText(CharitiesList.this, "Qatelik tuyndady!", Toast.LENGTH_LONG).show();                        swipeRefreshLayout.setRefreshing(false);                        System.out.println(t.getMessage());                    }                });    }}