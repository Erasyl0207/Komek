package kz.altyn.komek.ui.activities;import android.app.ProgressDialog;import android.content.Intent;import android.net.Uri;import android.os.Bundle;import android.view.MenuItem;import android.view.View;import android.widget.AdapterView;import android.widget.ArrayAdapter;import android.widget.EditText;import android.widget.Spinner;import android.widget.TextView;import android.widget.Toast;import androidx.appcompat.app.AppCompatActivity;import androidx.appcompat.widget.Toolbar;import androidx.cardview.widget.CardView;import com.afollestad.materialdialogs.MaterialDialog;import kz.altyn.komek.R;import kz.altyn.komek.models.Charity;import kz.altyn.komek.models.Donation;import com.bumptech.glide.Glide;import com.bumptech.glide.request.RequestOptions;import com.google.android.gms.tasks.OnSuccessListener;import com.google.android.material.floatingactionbutton.FloatingActionButton;import com.google.android.material.snackbar.Snackbar;import com.google.firebase.database.FirebaseDatabase;import java.util.Objects;import de.hdodenhof.circleimageview.CircleImageView;public class DonateMoney extends AppCompatActivity implements AdapterView.OnItemSelectedListener {    String paymentMethod = "Paypal";    private TextView titleTextView;    private TextView addressTextView;    private TextView descriptionTextView;    private TextView yearOfFoundationTextView;    private CircleImageView logo;    private EditText amountTv;    private FloatingActionButton callBtn;    private Charity charity;    private CardView donate;    @Override    protected void onCreate(Bundle savedInstanceState) {        super.onCreate(savedInstanceState);        setContentView(R.layout.activity_donate_money);        initUi();        initSpinner();        bindViews();        initFastFetchMoney();        donateMoney();    }    private void initUi() {        Toolbar toolbar = findViewById(R.id.toolbar);        setSupportActionBar(toolbar);        Objects.requireNonNull(getSupportActionBar()).setDisplayHomeAsUpEnabled(true);        getSupportActionBar().setDisplayShowHomeEnabled(true);        titleTextView = findViewById(R.id.title_charity_money);        addressTextView = findViewById(R.id.address_money);        descriptionTextView = findViewById(R.id.description_money);        yearOfFoundationTextView = findViewById(R.id.year_of_foundation_money);        amountTv = findViewById(R.id.amount);        callBtn = findViewById(R.id.floatingActionButton2);        logo = findViewById(R.id.textView6);        donate = findViewById(R.id.donate_money);        charity = (Charity) getIntent().getSerializableExtra("charity");        assert charity != null;        toolbar.setTitle("Donate to " + charity.getTitle());    }    private void initSpinner() {        Spinner spinner = findViewById(R.id.spinner);//        mDialog = new ProgressDialog(this);//        mDialog.setTitle("Please wait..");//        mDialog.setCancelable(false);//        mDialog.setCanceledOnTouchOutside(false);        ArrayAdapter<String> arrayAdapter = new ArrayAdapter<>(this, android.R.layout.simple_list_item_1, getResources().getStringArray(R.array.paymentMethods));        arrayAdapter.setDropDownViewResource(android.R.layout.simple_expandable_list_item_1);        spinner.setAdapter(arrayAdapter);        spinner.setOnItemSelectedListener(this);    }    private void initFastFetchMoney() {        TextView money500 = findViewById(R.id.money500);        TextView money1000 = findViewById(R.id.money1000);        TextView money5000 = findViewById(R.id.money5000);        TextView money10000 = findViewById(R.id.money10000);        money500.setOnClickListener(view -> performMoneyClick(500));        money1000.setOnClickListener(view -> performMoneyClick(1000));        money5000.setOnClickListener(view -> performMoneyClick(5000));        money10000.setOnClickListener(view -> performMoneyClick(10000));    }    private void bindViews() {        titleTextView.setText(charity.getTitle());        addressTextView.setText(charity.getAddress());        descriptionTextView.setText(charity.getDescription());        yearOfFoundationTextView.setText(charity.getYearOfFoundation());        Glide.with(getApplicationContext())                .setDefaultRequestOptions(new RequestOptions().placeholder(R.drawable.ic_flat))                .load(charity.getLogo())                .into(logo);        callBtn.setOnClickListener(view -> performCall(charity.getNumber()));    }    private void donateMoney() {        donate.setOnClickListener(view -> {            if (Long.parseLong(amountTv.getText().toString()) < 0) {                Toast.makeText(DonateMoney.this, "Can't input negative value", Toast.LENGTH_SHORT).show();            } else {            }        });    }    private void performMoneyClick(int i) {        amountTv.setText("");        amountTv.setText(String.valueOf(i));    }    private void performCall(String number) {        System.out.println(number);        Intent callIntent = new Intent(Intent.ACTION_DIAL);        callIntent.setData(Uri.parse("tel:" + number));        startActivity(callIntent);    }    @Override    public void onItemSelected(AdapterView<?> parent, View view, int position, long id) {        paymentMethod = parent.getItemAtPosition(position).toString();    }    public void onNothingSelected(AdapterView<?> arg0) {        Snackbar.make(findViewById(R.id.layout), "Gender (optional)", Snackbar.LENGTH_SHORT).show();    }    @Override    public void onBackPressed() {        new MaterialDialog.Builder(this)                .title("Artqa qaıtý")                .content("Artqa qaıtýǵa senimdisizbe?")                .positiveText("Ia")                .canceledOnTouchOutside(false)                .cancelable(false)                .onPositive((dialog, which) -> DonateMoney.this.finish())                .negativeText("Joq")                .show();    }    @Override    public void onPointerCaptureChanged(boolean hasCapture) {    }    @Override    public boolean onOptionsItemSelected(MenuItem item) {        switch (item.getItemId()) {            case android.R.id.home:                onBackPressed();                return true;        }        return super.onOptionsItemSelected(item);    }}